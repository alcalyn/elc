{% extends "ELCoreBundle::layout.html.twig" %}

{% block title %}{{ parent() }} - {{ 'games'|trans }}{% endblock %}

{% block body %}
<h2>{{ game.title }}</h2>
<p class="partie-title">{{ core_party.title }}</p>
{% if core_party.host %}
	<p class="host">Hôte : {{ core_party.host.pseudo }}</h2>
{% endif %}
<hr />
<div class="row">
	<div class="col-md-6">
		<div class="slots">
            {% for slot in slots %}
                {% include 'ELCoreBundle:Slot:slot.html.twig' %}
            {% endfor %}
		</div>
		<div class="more-slot">
			<button class="btn btn-default" type="button">Ajouter un slot</button>
		</div>
	</div>
	<div class="col-md-6">
		<div class="panel panel-default options">
			<div class="panel-heading">
				<h4 class="panel-title">Options de la partie</h4>
			</div>
			<div class="panel-body">
				<p>
					{% if core_party.open %}
						{{ 'public.party'|trans }}
					{% else %}
						{{ 'private.party'|trans }}
					{% endif %}
				</p>
				<p>
					{% if not core_party.allowChat %}
						{{ 'chat.disabled'|trans }}
					{% endif %}
				</p>
				<p>
					{% if not core_party.allowObservers %}
						{{ 'observers.disallowed'|trans }}
					{% endif %}
				</p>
			</div>
		</div>
	</div>
</div>
<hr />
<div class="row">
	<form action="{{ path('elcore_party_preparation_action', { 'slug_game': game.slug, 'slug_party': core_party.slug }) }}" method="post">
	    {% if in_party %}
	    	{% if is_host %}
		        <div class="col-md-4">
		            <button type="submit" name="action" value="cancel" class="btn btn-warning">{{ 'cancel'|trans }}</button>
		        </div>
		        <div class="col-md-4">
		            <button type="submit" name="action" value="run" class="btn btn-primary">{{ 'run.party'|trans }}</button>
		        </div>
		    {% else %}
		        <div class="col-md-4">
		            <button type="submit" name="action" value="leave" class="btn btn-warning">{{ 'leave'|trans }}</button>
		        </div>
		        <div class="col-md-4">
		            <button type="submit" name="action" value="ready" class="btn btn-success">{{ 'ready'|trans }}</button>
		        </div>
		    {% endif %}
	    {% else %}
	        {% if can_join %}
	            <div class="col-md-4 col-md-offset-4">
	                <button type="submit" name="action" value="join" class="btn btn-success">{{ 'join.party'|trans }}</button>
	            </div>
	        {% else %}
	            <div class="col-md-4 col-md-offset-4">
	                <p>{{ 'cannot.join.party.full'|trans }}</p>
	            </div>
	        {% endif %}
	    {% endif %}
    </form>
</div>
<hr />
<div class="row">
	<div class="col-md-12">
		<div class="panel panel-default chat">
			<div class="panel-heading">
				<h4 class="panel-title">Chat de la partie</h4>
			</div>
			<div class="panel-body">
				<ul>
					<li><span class="pseudo">robert60</span> : Bon salut, vous êtes prêt ?</li>
					<li><span class="pseudo">juju</span> : Message à rallonge Message à rallonge Message à rallonge Message à rallonge Message à rallonge Message à rallonge Message à rallonge </li>
					<li><span class="pseudo">robert60</span> : Bon salut, vous êtes prêt ?</li>
					<li><span class="pseudo">poloshow</span> : Aller go !</li>
				</ul>
			</div>
			<div class="panel-footer">
				<div class="input-group">
					<input type="text" class="form-control" placeholder="Message...">
					<span class="input-group-btn">
						<button class="btn btn-default" type="button">Envoyer</button>
					</span>
				</div>
			</div>
		</div>
	</div>
</div>
{% endblock %}
